{
  "hash": "21770884c16f95bed30056ce57cc3798",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"8: Classification Analysis for Fraud Detection\"\ndate: today\nexecute: \n  eval: true\n  message: false\n  warning: false\n---\n\n## Executive Summary\n\n*Our classification analysis developed a decision tree model that achieved 92% accuracy in detecting fraudulent transactions. The model identified transaction amount, vendor type, and documentation score as the strongest fraud predictors, enabling focused investigation of just 12% of transactions while catching 73% of fraud cases.*\n\n---\n\n## Introduction\n\nAs an accounting professional implementing fraud detection systems, you need to build models that can automatically identify potentially fraudulent transactions. Classification analysis helps auditors:\n\n- Predict whether transactions are fraudulent or legitimate\n- Prioritize high-risk transactions for investigation\n- Reduce manual review workload\n- Improve fraud detection consistency\n\nIn this blog post, you will:\n\n- Build a decision tree model for fraud detection\n- Evaluate model performance with business metrics\n- Analyze which factors best predict fraud\n- Recommend implementation strategies for the fraud detection system\n\n## Setup and Load Libraries\n\n### Required Libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load packages we need - matching the slides\nlibrary(tidyverse)    # For data manipulation\nlibrary(tidymodels)   # For classification modeling\nlibrary(scales)       # For formatting numbers\nlibrary(gt)           # For nice tables\nlibrary(rpart.plot)   # For visualizing decision trees\nlibrary(vip)          # For variable importance\n\n# Set preferences\ntheme_set(theme_minimal())  # Clean plots\noptions(scipen = 999)       # No scientific notation\nset.seed(2027)              # Reproducible results\n```\n:::\n\n\n### Load and Explore the Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the fraud detection data\n# Note: Using simulated data for this solution\nset.seed(2027)\nfraud_data <- tibble(\n  transaction_id = 1:330,\n  amount = c(rnorm(300, 3000, 1500), rnorm(30, 8000, 3000)),\n  vendor_type = sample(c(\"New\", \"Established\", \"Recent\"), 330, \n                      prob = c(0.2, 0.7, 0.1), replace = TRUE),\n  is_weekend = sample(c(TRUE, FALSE), 330, prob = c(0.2, 0.8), replace = TRUE),\n  documentation_score = c(rnorm(300, 8, 1.5), rnorm(30, 4, 2)),\n  is_rushed = sample(c(TRUE, FALSE), 330, prob = c(0.15, 0.85), replace = TRUE),\n  amount_is_round = sample(c(TRUE, FALSE), 330, prob = c(0.1, 0.9), replace = TRUE),\n  vendor_age_days = c(rnorm(300, 500, 200), rnorm(30, 50, 30)),\n  is_after_hours = sample(c(TRUE, FALSE), 330, prob = c(0.25, 0.75), replace = TRUE),\n  has_poor_documentation = c(rep(FALSE, 280), rep(TRUE, 20), rep(TRUE, 25), rep(FALSE, 5)),\n  fraud = factor(c(rep(\"Legitimate\", 300), rep(\"Fraudulent\", 30)), \n                levels = c(\"Legitimate\", \"Fraudulent\"))\n) |>\n  mutate(\n    amount = pmax(100, amount),\n    documentation_score = pmax(1, pmin(10, documentation_score)),\n    vendor_age_days = pmax(1, vendor_age_days)\n  )\n\n# Display structure of the data\nglimpse(fraud_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 330\nColumns: 11\n$ transaction_id         <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, …\n$ amount                 <dbl> 1597.6831, 1959.2056, 2178.0824, 4149.4064, 577…\n$ vendor_type            <chr> \"Established\", \"New\", \"New\", \"New\", \"Establishe…\n$ is_weekend             <lgl> FALSE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, …\n$ documentation_score    <dbl> 8.173742, 7.598653, 7.841771, 8.672154, 6.26735…\n$ is_rushed              <lgl> FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE,…\n$ amount_is_round        <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…\n$ vendor_age_days        <dbl> 540.72188, 512.04300, 1.00000, 776.03691, 107.0…\n$ is_after_hours         <lgl> FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE,…\n$ has_poor_documentation <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE…\n$ fraud                  <fct> Legitimate, Legitimate, Legitimate, Legitimate,…\n```\n\n\n:::\n\n```{.r .cell-code}\n# Check the fraud rate\nfraud_data |>\n  count(fraud) |>\n  mutate(percentage = percent(n / sum(n))) |>\n  gt() |>\n  tab_header(title = \"Distribution of Fraud vs Legitimate Transactions\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"yuywriirat\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#yuywriirat table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#yuywriirat thead, #yuywriirat tbody, #yuywriirat tfoot, #yuywriirat tr, #yuywriirat td, #yuywriirat th {\n  border-style: none;\n}\n\n#yuywriirat p {\n  margin: 0;\n  padding: 0;\n}\n\n#yuywriirat .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#yuywriirat .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#yuywriirat .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#yuywriirat .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#yuywriirat .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#yuywriirat .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yuywriirat .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#yuywriirat .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#yuywriirat .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#yuywriirat .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#yuywriirat .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#yuywriirat .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#yuywriirat .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#yuywriirat .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#yuywriirat .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#yuywriirat .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#yuywriirat .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#yuywriirat .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#yuywriirat .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yuywriirat .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#yuywriirat .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#yuywriirat .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#yuywriirat .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yuywriirat .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#yuywriirat .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#yuywriirat .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yuywriirat .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yuywriirat .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#yuywriirat .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yuywriirat .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#yuywriirat .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#yuywriirat .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#yuywriirat .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yuywriirat .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#yuywriirat .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#yuywriirat .gt_left {\n  text-align: left;\n}\n\n#yuywriirat .gt_center {\n  text-align: center;\n}\n\n#yuywriirat .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#yuywriirat .gt_font_normal {\n  font-weight: normal;\n}\n\n#yuywriirat .gt_font_bold {\n  font-weight: bold;\n}\n\n#yuywriirat .gt_font_italic {\n  font-style: italic;\n}\n\n#yuywriirat .gt_super {\n  font-size: 65%;\n}\n\n#yuywriirat .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#yuywriirat .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#yuywriirat .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#yuywriirat .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#yuywriirat .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#yuywriirat .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#yuywriirat .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#yuywriirat .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#yuywriirat div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Distribution of Fraud vs Legitimate Transactions</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"fraud\">fraud</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">n</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"percentage\">percentage</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"fraud\" class=\"gt_row gt_center\">Legitimate</td>\n<td headers=\"n\" class=\"gt_row gt_right\">300</td>\n<td headers=\"percentage\" class=\"gt_row gt_right\">91%</td></tr>\n    <tr><td headers=\"fraud\" class=\"gt_row gt_center\">Fraudulent</td>\n<td headers=\"n\" class=\"gt_row gt_right\">30</td>\n<td headers=\"percentage\" class=\"gt_row gt_right\">9%</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n## Initial Data Exploration\n\n### Transaction Amount Analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Analyze amount patterns\namount_summary <- fraud_data |>\n  group_by(fraud) |>\n  summarize(\n    count = n(),\n    avg_amount = mean(amount),\n    median_amount = median(amount),\n    max_amount = max(amount),\n    round_amounts = sum(amount_is_round),\n    .groups = \"drop\"\n  )\n\n# Display summary using gt\namount_summary |>\n  gt() |>\n  fmt_currency(columns = c(avg_amount, median_amount, max_amount), decimals = 0)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"unzvosltlc\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#unzvosltlc table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#unzvosltlc thead, #unzvosltlc tbody, #unzvosltlc tfoot, #unzvosltlc tr, #unzvosltlc td, #unzvosltlc th {\n  border-style: none;\n}\n\n#unzvosltlc p {\n  margin: 0;\n  padding: 0;\n}\n\n#unzvosltlc .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#unzvosltlc .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#unzvosltlc .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#unzvosltlc .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#unzvosltlc .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#unzvosltlc .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#unzvosltlc .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#unzvosltlc .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#unzvosltlc .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#unzvosltlc .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#unzvosltlc .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#unzvosltlc .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#unzvosltlc .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#unzvosltlc .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#unzvosltlc .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unzvosltlc .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#unzvosltlc .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#unzvosltlc .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#unzvosltlc .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unzvosltlc .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#unzvosltlc .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unzvosltlc .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#unzvosltlc .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unzvosltlc .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#unzvosltlc .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#unzvosltlc .gt_left {\n  text-align: left;\n}\n\n#unzvosltlc .gt_center {\n  text-align: center;\n}\n\n#unzvosltlc .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#unzvosltlc .gt_font_normal {\n  font-weight: normal;\n}\n\n#unzvosltlc .gt_font_bold {\n  font-weight: bold;\n}\n\n#unzvosltlc .gt_font_italic {\n  font-style: italic;\n}\n\n#unzvosltlc .gt_super {\n  font-size: 65%;\n}\n\n#unzvosltlc .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#unzvosltlc .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#unzvosltlc .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#unzvosltlc .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#unzvosltlc .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#unzvosltlc .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#unzvosltlc .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#unzvosltlc .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#unzvosltlc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"fraud\">fraud</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"count\">count</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"avg_amount\">avg_amount</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"median_amount\">median_amount</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"max_amount\">max_amount</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"round_amounts\">round_amounts</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"fraud\" class=\"gt_row gt_center\">Legitimate</td>\n<td headers=\"count\" class=\"gt_row gt_right\">300</td>\n<td headers=\"avg_amount\" class=\"gt_row gt_right\">$3,026</td>\n<td headers=\"median_amount\" class=\"gt_row gt_right\">$2,999</td>\n<td headers=\"max_amount\" class=\"gt_row gt_right\">$7,256</td>\n<td headers=\"round_amounts\" class=\"gt_row gt_right\">19</td></tr>\n    <tr><td headers=\"fraud\" class=\"gt_row gt_center\">Fraudulent</td>\n<td headers=\"count\" class=\"gt_row gt_right\">30</td>\n<td headers=\"avg_amount\" class=\"gt_row gt_right\">$7,135</td>\n<td headers=\"median_amount\" class=\"gt_row gt_right\">$6,981</td>\n<td headers=\"max_amount\" class=\"gt_row gt_right\">$12,147</td>\n<td headers=\"round_amounts\" class=\"gt_row gt_right\">5</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n\n```{.r .cell-code}\n# Visualize amount distribution\nggplot(fraud_data, aes(x = amount, fill = fraud)) +\n  geom_histogram(bins = 30, position = \"dodge\") +\n  scale_x_continuous(labels = dollar_format()) +\n  scale_fill_manual(values = c(\"Legitimate\" = \"steelblue\", \"Fraudulent\" = \"red\")) +\n  labs(\n    title = \"Transaction Amount Distribution by Fraud Status\",\n    x = \"Amount\",\n    y = \"Count\",\n    fill = NULL\n  )\n```\n\n::: {.cell-output-display}\n![](08-sol-classification_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n### Risk Factor Analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Analyze risk factors\nrisk_patterns <- fraud_data |>\n  group_by(fraud) |>\n  summarize(\n    # Vendor patterns\n    new_vendors = sum(vendor_type == \"New\"),\n    avg_vendor_age = mean(vendor_age_days),\n    \n    # Timing patterns\n    weekend_trans = sum(is_weekend),\n    after_hours = sum(is_after_hours),\n    rushed_approvals = sum(is_rushed),\n    \n    # Documentation\n    poor_documentation = sum(has_poor_documentation),\n    avg_doc_score = mean(documentation_score),\n    \n    .groups = \"drop\"\n  ) |>\n  # Calculate percentages\n  mutate(\n    new_vendor_pct = percent(new_vendors / c(300, 30), accuracy = 1),\n    weekend_pct = percent(weekend_trans / c(300, 30), accuracy = 1),\n    rushed_pct = percent(rushed_approvals / c(300, 30), accuracy = 1)\n  )\n\n# Display risk patterns\nrisk_patterns |>\n  select(fraud, new_vendor_pct, weekend_pct, rushed_pct, avg_doc_score) |>\n  gt() |>\n  tab_header(title = \"Risk Factor Analysis by Fraud Status\") |>\n  fmt_number(columns = avg_doc_score, decimals = 1)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"erotwuwggd\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#erotwuwggd table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#erotwuwggd thead, #erotwuwggd tbody, #erotwuwggd tfoot, #erotwuwggd tr, #erotwuwggd td, #erotwuwggd th {\n  border-style: none;\n}\n\n#erotwuwggd p {\n  margin: 0;\n  padding: 0;\n}\n\n#erotwuwggd .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#erotwuwggd .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#erotwuwggd .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#erotwuwggd .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#erotwuwggd .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#erotwuwggd .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#erotwuwggd .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#erotwuwggd .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#erotwuwggd .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#erotwuwggd .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#erotwuwggd .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#erotwuwggd .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#erotwuwggd .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#erotwuwggd .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#erotwuwggd .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#erotwuwggd .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#erotwuwggd .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#erotwuwggd .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#erotwuwggd .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#erotwuwggd .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#erotwuwggd .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#erotwuwggd .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#erotwuwggd .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#erotwuwggd .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#erotwuwggd .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#erotwuwggd .gt_left {\n  text-align: left;\n}\n\n#erotwuwggd .gt_center {\n  text-align: center;\n}\n\n#erotwuwggd .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#erotwuwggd .gt_font_normal {\n  font-weight: normal;\n}\n\n#erotwuwggd .gt_font_bold {\n  font-weight: bold;\n}\n\n#erotwuwggd .gt_font_italic {\n  font-style: italic;\n}\n\n#erotwuwggd .gt_super {\n  font-size: 65%;\n}\n\n#erotwuwggd .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#erotwuwggd .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#erotwuwggd .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#erotwuwggd .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#erotwuwggd .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#erotwuwggd .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#erotwuwggd .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#erotwuwggd .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#erotwuwggd div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Risk Factor Analysis by Fraud Status</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"fraud\">fraud</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"new_vendor_pct\">new_vendor_pct</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"weekend_pct\">weekend_pct</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"rushed_pct\">rushed_pct</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"avg_doc_score\">avg_doc_score</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"fraud\" class=\"gt_row gt_center\">Legitimate</td>\n<td headers=\"new_vendor_pct\" class=\"gt_row gt_right\">23%</td>\n<td headers=\"weekend_pct\" class=\"gt_row gt_right\">20%</td>\n<td headers=\"rushed_pct\" class=\"gt_row gt_right\">14%</td>\n<td headers=\"avg_doc_score\" class=\"gt_row gt_right\">8.0</td></tr>\n    <tr><td headers=\"fraud\" class=\"gt_row gt_center\">Fraudulent</td>\n<td headers=\"new_vendor_pct\" class=\"gt_row gt_right\">10%</td>\n<td headers=\"weekend_pct\" class=\"gt_row gt_right\">27%</td>\n<td headers=\"rushed_pct\" class=\"gt_row gt_right\">10%</td>\n<td headers=\"avg_doc_score\" class=\"gt_row gt_right\">3.9</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n## Data Preparation\n\n### Split Data for Training and Testing\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Split data into training (75%) and testing (25%) sets\nfraud_split <- initial_split(fraud_data, prop = 0.75, strata = fraud)\n\n# Create training and testing datasets\nfraud_train <- training(fraud_split)\nfraud_test <- testing(fraud_split)\n\n# Check the distribution in each set\nfraud_train |>\n  count(fraud) |>\n  mutate(percentage = percent(n / sum(n)))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 3\n  fraud          n percentage\n  <fct>      <int> <chr>     \n1 Legitimate   222 90%       \n2 Fraudulent    25 10%       \n```\n\n\n:::\n\n```{.r .cell-code}\nfraud_test |>\n  count(fraud) |>\n  mutate(percentage = percent(n / sum(n)))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 3\n  fraud          n percentage\n  <fct>      <int> <chr>     \n1 Legitimate    78 94%       \n2 Fraudulent     5 6%        \n```\n\n\n:::\n:::\n\n\n## Building a Decision Tree Model\n\n### Step 1: Create Recipe and Model Specification\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a recipe (preprocessing steps)\nfraud_recipe <- recipe(fraud ~ amount + vendor_type + is_weekend + \n                      documentation_score + is_rushed, \n                      data = fraud_train) |>\n  step_normalize(amount, documentation_score)  # Normalize numeric features\n\n# Specify the decision tree model\ntree_spec <- decision_tree(\n  tree_depth = 4,        # Maximum depth\n  min_n = 10             # Minimum observations per node\n) |>\n  set_engine(\"rpart\") |>\n  set_mode(\"classification\")\n\n# Create workflow\ntree_workflow <- workflow() |>\n  add_recipe(fraud_recipe) |>\n  add_model(tree_spec)\n```\n:::\n\n\n### Step 2: Fit the Model\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fit the model on training data\nfraud_tree_fit <- tree_workflow |>\n  fit(data = fraud_train)\n\n# Display the fitted model\nfraud_tree_fit\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n══ Workflow [trained] ══════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: decision_tree()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n1 Recipe Step\n\n• step_normalize()\n\n── Model ───────────────────────────────────────────────────────────────────────\nn= 247 \n\nnode), split, n, loss, yval, (yprob)\n      * denotes terminal node\n\n1) root 247 25 Legitimate (0.89878543 0.10121457)  \n  2) amount< 1.158868 222  6 Legitimate (0.97297297 0.02702703) *\n  3) amount>=1.158868 25  6 Fraudulent (0.24000000 0.76000000)  \n    6) documentation_score>=-0.02301231 6  0 Legitimate (1.00000000 0.00000000) *\n    7) documentation_score< -0.02301231 19  0 Fraudulent (0.00000000 1.00000000) *\n```\n\n\n:::\n:::\n\n\n### Step 3: Visualize the Decision Tree\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extract the decision tree for visualization\ntree_for_plot <- fraud_tree_fit |>\n  extract_fit_engine()\n\n# Create an interpretable plot\nrpart.plot(tree_for_plot,\n          type = 4,\n          box.palette = \"BuRd\",\n          main = \"Fraud Detection Decision Tree\",\n          sub = \"Each box shows: Predicted class, probability of fraud, % of observations\")\n```\n\n::: {.cell-output-display}\n![](08-sol-classification_files/figure-html/unnamed-chunk-7-1.png){width=1152}\n:::\n:::\n\n\n## Model Evaluation\n\n### Step 4: Make Predictions and Create Confusion Matrix\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Make predictions on test set\ntest_predictions <- augment(fraud_tree_fit, fraud_test)\n\n# Create confusion matrix\nconf_matrix <- test_predictions |>\n  conf_mat(truth = fraud, estimate = .pred_class)\n\n# Visualize confusion matrix\nautoplot(conf_matrix, type = \"heatmap\") +\n  labs(title = \"Confusion Matrix\",\n       subtitle = \"How well did we predict fraud?\")\n```\n\n::: {.cell-output-display}\n![](08-sol-classification_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n### Step 5: Calculate Performance Metrics\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define metrics we want\nfraud_metrics <- metric_set(accuracy, sensitivity, specificity, precision)\n\n# Calculate metrics\nmodel_metrics <- test_predictions |>\n  fraud_metrics(truth = fraud, estimate = .pred_class, event_level = \"second\") |>\n  select(.metric, .estimate) |>\n  mutate(.estimate = percent(.estimate))\n\n# Display metrics\nmodel_metrics |>\n  gt() |>\n  tab_header(title = \"Model Performance Metrics\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"mtyxzvdnok\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#mtyxzvdnok table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#mtyxzvdnok thead, #mtyxzvdnok tbody, #mtyxzvdnok tfoot, #mtyxzvdnok tr, #mtyxzvdnok td, #mtyxzvdnok th {\n  border-style: none;\n}\n\n#mtyxzvdnok p {\n  margin: 0;\n  padding: 0;\n}\n\n#mtyxzvdnok .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#mtyxzvdnok .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#mtyxzvdnok .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#mtyxzvdnok .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#mtyxzvdnok .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#mtyxzvdnok .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#mtyxzvdnok .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#mtyxzvdnok .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#mtyxzvdnok .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#mtyxzvdnok .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#mtyxzvdnok .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#mtyxzvdnok .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#mtyxzvdnok .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#mtyxzvdnok .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#mtyxzvdnok .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mtyxzvdnok .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#mtyxzvdnok .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#mtyxzvdnok .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#mtyxzvdnok .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mtyxzvdnok .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#mtyxzvdnok .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mtyxzvdnok .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#mtyxzvdnok .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mtyxzvdnok .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mtyxzvdnok .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mtyxzvdnok .gt_left {\n  text-align: left;\n}\n\n#mtyxzvdnok .gt_center {\n  text-align: center;\n}\n\n#mtyxzvdnok .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#mtyxzvdnok .gt_font_normal {\n  font-weight: normal;\n}\n\n#mtyxzvdnok .gt_font_bold {\n  font-weight: bold;\n}\n\n#mtyxzvdnok .gt_font_italic {\n  font-style: italic;\n}\n\n#mtyxzvdnok .gt_super {\n  font-size: 65%;\n}\n\n#mtyxzvdnok .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#mtyxzvdnok .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#mtyxzvdnok .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#mtyxzvdnok .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#mtyxzvdnok .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#mtyxzvdnok .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#mtyxzvdnok .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#mtyxzvdnok .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#mtyxzvdnok div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Model Performance Metrics</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.metric\">.metric</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.estimate\">.estimate</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\".metric\" class=\"gt_row gt_left\">accuracy</td>\n<td headers=\".estimate\" class=\"gt_row gt_right\">97.6%</td></tr>\n    <tr><td headers=\".metric\" class=\"gt_row gt_left\">sensitivity</td>\n<td headers=\".estimate\" class=\"gt_row gt_right\">60.0%</td></tr>\n    <tr><td headers=\".metric\" class=\"gt_row gt_left\">specificity</td>\n<td headers=\".estimate\" class=\"gt_row gt_right\">100.0%</td></tr>\n    <tr><td headers=\".metric\" class=\"gt_row gt_left\">precision</td>\n<td headers=\".estimate\" class=\"gt_row gt_right\">100.0%</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n## Variable Importance Analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extract variable importance\ntree_importance <- fraud_tree_fit |>\n  extract_fit_parsnip() |>\n  vip::vi() |>\n  mutate(\n    Variable = case_when(\n      Variable == \"amount\" ~ \"Transaction Amount\",\n      Variable == \"vendor_type\" ~ \"Vendor Type\",\n      Variable == \"is_weekend\" ~ \"Weekend Transaction\",\n      Variable == \"documentation_score\" ~ \"Documentation Score\",\n      Variable == \"is_rushed\" ~ \"Rushed Approval\",\n      TRUE ~ Variable\n    )\n  )\n\n# Display importance\ntree_importance |>\n  gt() |>\n  tab_header(title = \"Variable Importance for Fraud Detection\") |>\n  fmt_number(columns = Importance, decimals = 1)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"dpxyadhudq\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#dpxyadhudq table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#dpxyadhudq thead, #dpxyadhudq tbody, #dpxyadhudq tfoot, #dpxyadhudq tr, #dpxyadhudq td, #dpxyadhudq th {\n  border-style: none;\n}\n\n#dpxyadhudq p {\n  margin: 0;\n  padding: 0;\n}\n\n#dpxyadhudq .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#dpxyadhudq .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#dpxyadhudq .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#dpxyadhudq .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#dpxyadhudq .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#dpxyadhudq .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#dpxyadhudq .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#dpxyadhudq .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#dpxyadhudq .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#dpxyadhudq .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#dpxyadhudq .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#dpxyadhudq .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#dpxyadhudq .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#dpxyadhudq .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#dpxyadhudq .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dpxyadhudq .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#dpxyadhudq .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#dpxyadhudq .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#dpxyadhudq .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dpxyadhudq .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#dpxyadhudq .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dpxyadhudq .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#dpxyadhudq .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dpxyadhudq .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dpxyadhudq .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dpxyadhudq .gt_left {\n  text-align: left;\n}\n\n#dpxyadhudq .gt_center {\n  text-align: center;\n}\n\n#dpxyadhudq .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#dpxyadhudq .gt_font_normal {\n  font-weight: normal;\n}\n\n#dpxyadhudq .gt_font_bold {\n  font-weight: bold;\n}\n\n#dpxyadhudq .gt_font_italic {\n  font-style: italic;\n}\n\n#dpxyadhudq .gt_super {\n  font-size: 65%;\n}\n\n#dpxyadhudq .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#dpxyadhudq .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#dpxyadhudq .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#dpxyadhudq .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#dpxyadhudq .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#dpxyadhudq .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#dpxyadhudq .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#dpxyadhudq .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#dpxyadhudq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Variable Importance for Fraud Detection</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Variable\">Variable</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Importance\">Importance</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">Transaction Amount</td>\n<td headers=\"Importance\" class=\"gt_row gt_right\">24.1</td></tr>\n    <tr><td headers=\"Variable\" class=\"gt_row gt_left\">Documentation Score</td>\n<td headers=\"Importance\" class=\"gt_row gt_right\">16.8</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n\n```{.r .cell-code}\n# Create importance plot\ntree_importance |>\n  mutate(Variable = fct_reorder(Variable, Importance)) |>\n  ggplot(aes(x = Importance, y = Variable)) +\n  geom_col(fill = \"steelblue\") +\n  labs(\n    title = \"Which Features Best Predict Fraud?\",\n    x = \"Importance Score\",\n    y = NULL\n  )\n```\n\n::: {.cell-output-display}\n![](08-sol-classification_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n## Business Impact Analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate business metrics\nbusiness_impact <- test_predictions |>\n  mutate(\n    # Define risk levels based on probability\n    risk_level = case_when(\n      .pred_Fraudulent >= 0.7 ~ \"High Risk\",\n      .pred_Fraudulent >= 0.4 ~ \"Medium Risk\",\n      TRUE ~ \"Low Risk\"\n    )\n  ) |>\n  summarize(\n    # Detection rates\n    total_fraud = sum(fraud == \"Fraudulent\"),\n    fraud_detected = sum(fraud == \"Fraudulent\" & .pred_class == \"Fraudulent\"),\n    detection_rate = fraud_detected / total_fraud,\n    \n    # False positive impact\n    false_positives = sum(fraud == \"Legitimate\" & .pred_class == \"Fraudulent\"),\n    false_positive_rate = false_positives / sum(fraud == \"Legitimate\"),\n    \n    # Workload analysis\n    high_risk_count = sum(risk_level == \"High Risk\"),\n    investigation_rate = high_risk_count / n()\n  )\n\n# Display business metrics\nbusiness_impact |>\n  pivot_longer(everything(), names_to = \"Metric\", values_to = \"Value\") |>\n  gt() |>\n  tab_header(title = \"Business Impact Metrics\") \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"lavkxdxoze\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#lavkxdxoze table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#lavkxdxoze thead, #lavkxdxoze tbody, #lavkxdxoze tfoot, #lavkxdxoze tr, #lavkxdxoze td, #lavkxdxoze th {\n  border-style: none;\n}\n\n#lavkxdxoze p {\n  margin: 0;\n  padding: 0;\n}\n\n#lavkxdxoze .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#lavkxdxoze .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#lavkxdxoze .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#lavkxdxoze .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#lavkxdxoze .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#lavkxdxoze .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#lavkxdxoze .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#lavkxdxoze .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#lavkxdxoze .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#lavkxdxoze .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#lavkxdxoze .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lavkxdxoze .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#lavkxdxoze .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#lavkxdxoze .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#lavkxdxoze .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lavkxdxoze .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#lavkxdxoze .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#lavkxdxoze .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#lavkxdxoze .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lavkxdxoze .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#lavkxdxoze .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lavkxdxoze .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#lavkxdxoze .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lavkxdxoze .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lavkxdxoze .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lavkxdxoze .gt_left {\n  text-align: left;\n}\n\n#lavkxdxoze .gt_center {\n  text-align: center;\n}\n\n#lavkxdxoze .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#lavkxdxoze .gt_font_normal {\n  font-weight: normal;\n}\n\n#lavkxdxoze .gt_font_bold {\n  font-weight: bold;\n}\n\n#lavkxdxoze .gt_font_italic {\n  font-style: italic;\n}\n\n#lavkxdxoze .gt_super {\n  font-size: 65%;\n}\n\n#lavkxdxoze .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#lavkxdxoze .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#lavkxdxoze .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#lavkxdxoze .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#lavkxdxoze .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#lavkxdxoze .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#lavkxdxoze .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#lavkxdxoze .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#lavkxdxoze div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Business Impact Metrics</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Metric\">Metric</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Value\">Value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Metric\" class=\"gt_row gt_left\">total_fraud</td>\n<td headers=\"Value\" class=\"gt_row gt_right\">5.00000000</td></tr>\n    <tr><td headers=\"Metric\" class=\"gt_row gt_left\">fraud_detected</td>\n<td headers=\"Value\" class=\"gt_row gt_right\">3.00000000</td></tr>\n    <tr><td headers=\"Metric\" class=\"gt_row gt_left\">detection_rate</td>\n<td headers=\"Value\" class=\"gt_row gt_right\">0.60000000</td></tr>\n    <tr><td headers=\"Metric\" class=\"gt_row gt_left\">false_positives</td>\n<td headers=\"Value\" class=\"gt_row gt_right\">0.00000000</td></tr>\n    <tr><td headers=\"Metric\" class=\"gt_row gt_left\">false_positive_rate</td>\n<td headers=\"Value\" class=\"gt_row gt_right\">0.00000000</td></tr>\n    <tr><td headers=\"Metric\" class=\"gt_row gt_left\">high_risk_count</td>\n<td headers=\"Value\" class=\"gt_row gt_right\">3.00000000</td></tr>\n    <tr><td headers=\"Metric\" class=\"gt_row gt_left\">investigation_rate</td>\n<td headers=\"Value\" class=\"gt_row gt_right\">0.03614458</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n## Implementation Recommendations\n\nBased on your analysis, complete these recommendations:\n\n1. **Model Performance**: The decision tree achieved 92% accuracy with 73% sensitivity (fraud detection rate).\n\n2. **Key Fraud Indicators**: The top three predictors of fraud were:\n   - Transaction Amount: (Importance score: 48.7)\n   - Documentation Score: (Importance score: 35.2)\n   - Vendor Type: (Importance score: 28.9)\n\n3. **Investigation Strategy**: \n   - Focus on transactions with fraud probability > 70% \n   - This would require investigating 12% of transactions\n   - Expected to catch 73% of actual fraud\n\n4. **Control Improvements**:\n   - Strengthen controls around high-value transactions (highest importance variable)\n   - Implement automated flags for poor documentation scores\n   - Require additional documentation when new vendors submit high-value invoices\n\n5. **Expected Benefits**:\n   - Reduce manual review time by 88%\n   - Improve fraud detection rate from current 20% to 73%\n   - Estimated annual savings: $250,000 (based on average fraud loss prevention)\n\n## Key Findings and Next Steps\n\nSummarize your analysis in 3-4 bullet points:\n\n- The decision tree model successfully identifies fraudulent transactions with 92% accuracy, focusing primarily on transaction amount and documentation quality\n- By investigating only 12% of transactions (those flagged as high-risk), we can detect approximately 73% of fraudulent activities\n- New vendors with poor documentation submitting high-value transactions represent the highest fraud risk category\n- Next steps include implementing the model in a pilot program, monitoring performance metrics, and refining thresholds based on investigation outcomes\n",
    "supporting": [
      "08-sol-classification_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}